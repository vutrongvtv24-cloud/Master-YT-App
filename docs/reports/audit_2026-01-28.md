# Audit Report - 2026-01-28

## Summary
- ğŸ”´ Critical Issues: 1 (Functional Stability)
- ğŸŸ¡ Warnings: 2 (Code Quality, Performance)
- ğŸŸ¢ Suggestions: 2 (Optimization)

## ğŸ”´ Critical Issues (Pháº£i sá»­a ngay)
1. **Lá»—i Xá»­ LÃ½ Äa API Key (Inconsistent API Key Usage)**
   - **File:** `main_app.py`, `ui_tabs/tab_keyword_research.py`
   - **Váº¥n Ä‘á»:** á»¨ng dá»¥ng há»— trá»£ nháº­p nhiá»u API Key (má»—i dÃ²ng má»™t key), nhÆ°ng má»™t sá»‘ nÆ¡i trong code (vÃ­ dá»¥: khi táº£i danh má»¥c video lÃºc khá»Ÿi Ä‘á»™ng `main_app.py` vÃ  tÃ¬m kiáº¿m kÃªnh `SearchChannelsThread`) láº¡i láº¥y toÃ n bá»™ vÄƒn báº£n chá»©a táº¥t cáº£ key Ä‘á»ƒ gá»i API. 
   - **Nguy hiá»ƒm:** Náº¿u báº¡n nháº­p nhiá»u key, tÃ­nh nÄƒng táº£i danh má»¥c vÃ  tÃ¬m kÃªnh sáº½ bá»‹ lá»—i (crash) hoáº·c khÃ´ng hoáº¡t Ä‘á»™ng vÃ¬ API Google khÃ´ng hiá»ƒu chuá»—i chá»©a nhiá»u key.
   - **CÃ¡ch sá»­a:** Sá»­ dá»¥ng `APIKeyManager` hoáº·c logic tÃ¡ch key (split) Ä‘á»“ng nháº¥t trÃªn toÃ n bá»™ dá»± Ã¡n, thay vÃ¬ gá»i trá»±c tiáº¿p `build(..., developerKey=self.api_key)`.

## ğŸŸ¡ Warnings (NÃªn sá»­a)
1. **Code QuÃ¡ DÃ i & Phá»©c Táº¡p (High Complexity)**
   - **File:** `ui_tabs/tab_downloader.py` (~1000 dÃ²ng), `ui_tabs/tab_channel_research.py`.
   - **Váº¥n Ä‘á»:** File `tab_downloader.py` chá»©a quÃ¡ nhiá»u logic (Download Video, Comment, Subtitle) trong má»™t chá»—. CÃ¡c hÃ m `run()` cá»§a thread ráº¥t dÃ i (>100 dÃ²ng).
   - **Háº­u quáº£:** KhÃ³ báº£o trÃ¬, khÃ³ sá»­a lá»—i sau nÃ y. Má»™t lá»—i nhá» á»Ÿ pháº§n download comment cÃ³ thá»ƒ áº£nh hÆ°á»Ÿng Ä‘áº¿n pháº§n download video.
   - **CÃ¡ch sá»­a:** TÃ¡ch nhá» cÃ¡c Class Thread ra cÃ¡c file riÃªng biá»‡t (vÃ­ dá»¥: `download_worker.py`).

2. **UI Thread Blocking & Sleep Loops**
   - **File:** `ui_tabs/tab_downloader.py`
   - **Váº¥n Ä‘á»:** Sá»­ dá»¥ng `self.msleep(10)` vÃ  `self.msleep(100)` trong cÃ¡c vÃ²ng láº·p while.
   - **Háº­u quáº£:** Máº·c dÃ¹ náº±m trong Thread riÃªng, viá»‡c polling liÃªn tá»¥c (kiá»ƒu `while True: sleep`) khÃ´ng tá»‘i Æ°u báº±ng viá»‡c sá»­ dá»¥ng Event-driven programming.
   - **CÃ¡ch sá»­a:** Sá»­ dá»¥ng `QWaitCondition` hoáº·c cáº¥u trÃºc láº¡i logic Ä‘á»ƒ trÃ¡nh busy-wait náº¿u cÃ³ thá»ƒ.

## ğŸŸ¢ Suggestions (TÃ¹y chá»n)
1. **Tá»‘i Æ°u hÃ³a Database Cache**
   - **File:** `db_cache.py`
   - **Gá»£i Ã½:** Hiá»‡n táº¡i Ä‘ang cache má»i request. NÃªn cÃ³ cÆ¡ cháº¿ dá»n dáº¹p (Vacuum) Ä‘á»‹nh ká»³ Ä‘á»ƒ file `cache.db` khÃ´ng phÃ¬nh to quÃ¡ má»©c sau thá»i gian dÃ i sá»­ dá»¥ng.

2. **Logging chÆ°a Ä‘á»“ng bá»™**
   - **Setup:** Má»™t sá»‘ chá»— dÃ¹ng `print`, má»™t sá»‘ chá»— dÃ¹ng `logging`. NÃªn chuyá»ƒn háº¿t vá» `logging` Ä‘á»ƒ dá»… trace lá»—i trÃªn mÃ¡y ngÆ°á»i dÃ¹ng (file log).

## Next Steps
Chá»n má»™t tÃ¹y chá»n tá»« menu bÃªn dÆ°á»›i Ä‘á»ƒ tiáº¿p tá»¥c.
